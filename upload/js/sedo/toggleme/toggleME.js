!function(n){XenForo.ToggleME={bloodyIE:!1,cookiename:"toggleme",initGlobal:function(){var i=XenForo.ToggleME;i.mycookie=n.getCookie(i.cookiename),i.initEffects(),n.browser.msie&&parseInt(n.browser.version,10)<8&&(i.bloodyIE=!0),n(".tglWchild").ready(function(){var n=".tglWchild",t="main";i.bakeCategories(n,t)}),n(".tglNOchild").ready(function(){var n=".tglNOchild",t="mix";i.bakeCategories(n,t)}),n(".tglNodelist_forumview").ready(function(){i.bakeNodeList()}),n(".tglSidebar").ready(function(){i.bakeBlocks()}),n(".tglPoll").ready(function(){i.bakePolls()})},initEffects:function(){this.d=XenForo.toogleMeConfig.duration,this.e=XenForo.toogleMeConfig.effect},initPostbit:function(t){var i=XenForo.ToggleME,r=t.find(".tglPosbit"),e=t.find(".extraUserInfo"),u,f;(i.initEffects(),r.length)&&(u=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideDown(i.d,i.e).removeClass("toggleHidden"),t.removeClass("inactive").addClass("active")},f=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideUp(i.d,i.e).addClass("toggleHidden"),t.removeClass("active").addClass("inactive")},XenForo.toogleMeConfig.postbit_state===0?(e.hide(),r.addClass("inactive").toggle(u,f)):(e.show(),r.addClass("active").toggle(f,u)))},bakeCookie:function(t,i,r){var e=i+":"+r,u=this,s,o,f;return!u.mycookie||u.mycookie=="undefined"?u.mycookie=e:(s=u.mycookie.split("[]"),o=new RegExp(i+":[01]","i"),u.mycookie=u.mycookie.match(o)?u.mycookie.replace(o,e):u.mycookie+"[]"+e),f=90,f=new Date(+new Date+f*864e5),n.setCookie(t,u.mycookie,f)},bakeCategories:function(t,i){var r=this,u=n(t),y=t+".active",p=t+".inactive",c=t+".tglWOFF",f=!1,e="CategoryStripCollapsed",o="categoryStrip",s="inactive",h="active";u.hasClass("tglDnt")||(f=!0),u.addClass("active"),u.parent().each(function(){n(this).nextAll().not("span").wrapAll('<div class="toggleMEtarget" />')}),!r.mycookie||r.mycookie=="undefined"?(n(c).parent().next().hide(),n(c).removeClass(h).addClass(s),f==!0&&n(c).parent().removeClass(o).addClass(e)):u.each(function(){var l=n(this),c=this.id,c=c==undefined||!c?l.data("id"):c,a=l.parent().next(),v=new RegExp(i+c+":1","i"),y=new RegExp(i+c+":0","i");(r.mycookie.match(v)||l.hasClass("tglWOFF")&&!r.mycookie.match(y)&&!r.mycookie.match(v))&&(a.hide(),a.prev().children(t).removeClass(h).addClass(s),f==!0&&a.prev().removeClass(o).addClass(e))});var l=function(n,t){var l=n.parent(),u=l.next(),a=t?s:h,v=t?h:s,y=t?e:o,p=t?o:e;r.bloodyIE?t?u.show():u.hide():t?u.slideDown(r.d,r.e):u.slideUp(r.d,r.e),n.removeClass(a).addClass(v),f==!0&&l.removeClass(y).addClass(p);var c=n.attr("id"),c=c==undefined?n.data("id"):c,w=i+c,b=t?"0":"1";r.bakeCookie(r.cookiename,w,b)},a=function(){l(n(this),!1)},v=function(){l(n(this),!0)};n(y).toggle(a,v),n(p).toggle(v,a)},bakeNodeList:function(){var i=this,s=".tglNodelist_forumview",t=n(s),v=s+".active",y=s+".inactive",p="ndfw_",w=n(".tglNodelist_forumview").attr("id"),h=p+w,r=".toggleME_Expand",u=".toggleME_Collapse",f="active",e="inactive",o;t.each(function(){n(this).nextAll().wrapAll('<div class="toggleMEtarget" />')}),t.hasClass("tglNodeOff")?(t.addClass(e).children(r).show(),t.children(u).hide(),t.next().hide()):(t.addClass(f).children(r).hide(),t.children(u).show()),!i.mycookie||i.mycookie=="undefined"||(t.hasClass("tglNodeOff")?(o=new RegExp(h+":0","i"),i.mycookie.match(o)&&(t.removeClass(e).addClass(f).next().show(),t.children(r).hide(),t.children(u).show())):(o=new RegExp(h+":1","i"),i.mycookie.match(o)&&(t.removeClass(f).addClass(e).next().hide(),t.children(r).show(),t.children(u).hide())));var c=function(n,t){var s=t?u:r,c=t?r:u,l=t?e:f,a=t?f:e,o;n.children(s).show(),n.children(c).hide(),t?n.next().slideDown(i.d,i.e):n.next().slideUp(i.d,i.e),n.removeClass(l).addClass(a),o=t?"0":"1",i.bakeCookie(i.cookiename,h,o)},l=function(){c(n(this),!1)},a=function(){c(n(this),!0)};n(v).toggle(l,a),n(y).toggle(a,l)},bakePolls:function(){var t=n(".tglPoll"),o=n("dl.pollLast"),r=t.parent().nextUntil(o.next()).hide(),i=[t.data("show"),t.data("hide"),t.data("ellipsis")],u,f,e;t.length&&(t.removeClass("hide").text(i[0]),u=function(){n('<span class="tglEllipsis" />').text(i[2]).insertAfter(r.last())},u(),f=function(){var t=n(this).addClass("active").text(i[1]);r.slideDown(self.d,self.e).last().next().remove()},e=function(){var t=n(this).removeClass("active").text(i[0]);r.slideUp(self.d,self.e),u()},t.toggle(f,e))},bakeBlocks:function(){var t=this,i=".tglSidebar",s=n(i),p=i+".active",w=i+".inactive",c=i+".tglSbOFF",h="sbb",u=".toggleMEtarget",f="secondaryContent",e="secondaryContentCollapsed",r="active",o="inactive",l="WidgetFramework_WidgetRenderer_";s.addClass(r),s.next().each(function(){var t=n(this),f=t.parent(),r=t.nextAll(),u=0,e;if(!r.length){r=t,u=1,t.prev(i).remove();return}r.wrapAll('<div class="toggleMEtarget" />')}),!t.mycookie||t.mycookie=="undefined"?(n(c).removeClass(r).addClass(o).siblings(u).hide(),n(c).parent().removeClass(f).addClass(e)):s.each(function(){var c=n(this),s=this.id,a,v;s!=undefined&&(s=s.replace(l,"WFWR_")),a=new RegExp(h+s+":1","i"),v=new RegExp(h+s+":0","i"),(t.mycookie.match(a)||c.hasClass("tglSbOFF")&&!t.mycookie.match(v)&&!t.mycookie.match(a))&&(c.siblings(u).hide(),c.removeClass(r).addClass(o),c.parent().removeClass(f).addClass(e))});var a=function(n,i){var a=i?o:r,v=i?r:o,y=i?e:f,p=i?f:e,s,c;i?n.siblings(u).slideDown(t.d,t.e):n.siblings(u).slideUp(t.d,t.e),n.removeClass(a).addClass(v),n.parent().removeClass(y).addClass(p),s=n.attr("id"),s!=undefined&&(s=s.replace(l,"WFWR_")),c=h+s,cookieWidgetValue=i?"0":"1",t.bakeCookie(t.cookiename,c,cookieWidgetValue)},v=function(){a(n(this),!1)},y=function(){a(n(this),!0)};n(p).toggle(v,y),n(w).toggle(y,v)}},XenForo.register("body","XenForo.ToggleME.initGlobal"),XenForo.register(".messageUserBlock","XenForo.ToggleME.initPostbit")}(jQuery,this,document);