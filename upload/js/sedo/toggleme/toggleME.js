!function(n){XenForo.ToggleME={bloodyIE:!1,cookiename:"toggleme",initGlobal:function(){var i=XenForo.ToggleME;i.mycookie=n.getCookie(i.cookiename),i.initEffects(),n.browser.msie&&parseInt(n.browser.version,10)<8&&(i.bloodyIE=!0),n(".tglWchild").ready(function(){var n=".tglWchild",t="main";i.bakeCategories(n,t)}),n(".tglNOchild").ready(function(){var n=".tglNOchild",t="mix";i.bakeCategories(n,t)}),n(".tglNodelist_forumview").ready(function(){i.bakeNodeList()}),n(".tglSidebar").ready(function(){i.bakeBlocks()}),n(".tglPoll").ready(function(){i.bakePolls()}),n(".tglAllSidebar").ready(function(){i.bakeSidebar()})},initEffects:function(){this.d=XenForo.toogleMeConfig.duration,this.e=XenForo.toogleMeConfig.effect},initPostbit:function(t){var i=XenForo.ToggleME,r=t.find(".tglPosbit"),e=t.find(".extraUserInfo"),o=XenForo.toogleMeConfig.postbit_state,u,f;(i.initEffects(),r.length)&&(u=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideDown(i.d,i.e).removeClass("toggleHidden"),t.removeClass("inactive").addClass("active"),i.faToggle(t,!0)},f=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideUp(i.d,i.e).addClass("toggleHidden"),t.removeClass("active").addClass("inactive"),i.faToggle(t)},o===0?(e.hide(),r.addClass("inactive").toggle(u,f)):(e.show(),r.addClass("active").toggle(f,u)),i.faToggle(t,o))},bakeCookie:function(t,i,r){var e=i+":"+r,u=this,s,o,f;return u._validCookie()?(s=u.mycookie.split("[]"),o=new RegExp(i+":[01]","i"),u.mycookie=u.mycookie.match(o)?u.mycookie.replace(o,e):u.mycookie+"[]"+e):u.mycookie=e,f=90,f=new Date(+new Date+f*864e5),n.setCookie(t,u.mycookie,f)},bakeCategories:function(t,i){var r=this,u=n(t),l=t+".active",a=t+".inactive",c=t+".tglWOFF",f=!1,e="CategoryStripCollapsed",o="categoryStrip",s="inactive",h="active";u.hasClass("tglDnt")||(f=!0),u.addClass("active"),u.parent().each(function(){n(this).nextAll().not("span").wrapAll('<div class="toggleMEtarget" />')}),r._validCookie()?u.each(function(){var l=n(this),c=this.id,c=c==undefined||!c?l.data("id"):c,a=l.parent().next(),v=new RegExp(i+c+":1","i"),y=new RegExp(i+c+":0","i");(r.mycookie.match(v)||l.hasClass("tglWOFF")&&!r.mycookie.match(y)&&!r.mycookie.match(v))&&(a.hide(),a.prev().children(t).removeClass(h).addClass(s),f==!0&&a.prev().removeClass(o).addClass(e))}):(n(c).parent().next().hide(),n(c).removeClass(h).addClass(s),f==!0&&n(c).parent().removeClass(o).addClass(e));var v=function(n,t){var l=n.parent(),u=l.next(),a=t?s:h,v=t?h:s,y=t?e:o,p=t?o:e;r.bloodyIE?t?u.show():u.hide():t?u.slideDown(r.d,r.e):u.slideUp(r.d,r.e),r.faToggle(n,t),n.removeClass(a).addClass(v),f==!0&&l.removeClass(y).addClass(p);var c=n.attr("id"),c=c==undefined?n.data("id"):c,w=i+c,b=t?"0":"1";r.bakeCookie(r.cookiename,w,b)},y=function(){v(n(this),!1)},p=function(){v(n(this),!0)};n(l).toggle(y,p),n(a).toggle(p,y),r.faToggle(n(l),!0),r.faToggle(n(a))},bakeNodeList:function(){var i=this,s=".tglNodelist_forumview",t=n(s),v=s+".active",y=s+".inactive",p="ndfw_",w=n(".tglNodelist_forumview").attr("id"),h=p+w,r=".toggleME_Expand",u=".toggleME_Collapse",f="active",e="inactive",o;t.each(function(){n(this).nextAll().wrapAll('<div class="toggleMEtarget" />')}),t.hasClass("tglNodeOff")?(t.addClass(e).children(r).show(),t.children(u).hide(),t.next().hide()):(t.addClass(f).children(r).hide(),t.children(u).show()),i._validCookie()&&(t.hasClass("tglNodeOff")?(o=new RegExp(h+":0","i"),i.mycookie.match(o)&&(t.removeClass(e).addClass(f).next().show(),t.children(r).hide(),t.children(u).show())):(o=new RegExp(h+":1","i"),i.mycookie.match(o)&&(t.removeClass(f).addClass(e).next().hide(),t.children(r).show(),t.children(u).hide())));var c=function(n,t){var s=t?u:r,c=t?r:u,l=t?e:f,a=t?f:e,o;n.children(s).show(),n.children(c).hide(),t?n.next().slideDown(i.d,i.e):n.next().slideUp(i.d,i.e),n.removeClass(l).addClass(a),o=t?"0":"1",i.bakeCookie(i.cookiename,h,o)},l=function(){c(n(this),!1)},a=function(){c(n(this),!0)};n(v).toggle(l,a),n(y).toggle(a,l)},bakePolls:function(){var i=this,t=n(".tglPoll"),s=n("dl.pollLast"),u=t.parent().nextUntil(s.next()).hide(),r=[t.data("show"),t.data("hide"),t.data("ellipsis")],f,e,o;t.length&&(t.removeClass("hide").text(r[0]),f=function(){n('<span class="tglEllipsis" />').text(r[2]).insertAfter(u.last())},f(),e=function(){var t=n(this).addClass("active").text(r[1]);u.slideDown(i.d,i.e).last().next().remove()},o=function(){var t=n(this).removeClass("active").text(r[0]);u.slideUp(i.d,i.e),f()},t.toggle(e,o))},bakeBlocks:function(){var t=this,i=".tglSidebar",s=n(i),c=i+".active",l=i+".inactive",a=i+".tglSbOFF",h="sbb",u=".toggleMEtarget",f="secondaryContent",e="secondaryContentCollapsed",r="active",o="inactive",v="WidgetFramework_WidgetRenderer_";s.addClass(r),s.next().each(function(){var t=n(this),f=t.parent(),r=t.nextAll(),u=0,e;if(!r.length){r=t,u=1,t.prev(i).remove();return}r.wrapAll('<div class="toggleMEtarget" />')}),t._validCookie()?s.each(function(){var c=n(this),s=this.id,l,a;s!=undefined&&(s=s.replace(v,"WFWR_")),l=new RegExp(h+s+":1","i"),a=new RegExp(h+s+":0","i"),(t.mycookie.match(l)||c.hasClass("tglSbOFF")&&!t.mycookie.match(a)&&!t.mycookie.match(l))&&(c.siblings(u).hide(),c.removeClass(r).addClass(o),c.parent().removeClass(f).addClass(e))}):(n(a).removeClass(r).addClass(o).siblings(u).hide(),n(a).parent().removeClass(f).addClass(e));var y=function(n,i){var l=i?o:r,a=i?r:o,y=i?e:f,p=i?f:e,s,c;i?n.siblings(u).slideDown(t.d,t.e):n.siblings(u).slideUp(t.d,t.e),n.removeClass(l).addClass(a),n.parent().removeClass(y).addClass(p),t.faToggle(n,i),s=n.attr("id"),s!=undefined&&(s=s.replace(v,"WFWR_")),c=h+s,cookieWidgetValue=i?"0":"1",t.bakeCookie(t.cookiename,c,cookieWidgetValue)},p=function(){y(n(this),!1)},w=function(){y(n(this),!0)};n(c).toggle(p,w),n(l).toggle(w,p),t.faToggle(n(c),!0),t.faToggle(n(l))},bakeSidebar:function(){var u=this,t=n(".tglAllSidebar"),r=t.siblings(),f=t.parents(".pageContent").children(".mainContainer"),i=[t.data("show"),t.data("hide")],e,s="600",h="easeInSine",c="sidebar",o=n();if(wip=!1,t.length){n.each(i,function(t,r){var f=r.split("|"),u="";n.each(f,function(n,t){u+=t.indexOf("fa")===0?'<i class="fa '+t+'"></i>':t}),i[t]=u});var v=function(t,u){wip!=!0&&(wip=!0,o.each(function(){var t=n(this).removeClass("tglHide"),i=t.data("tglId");n('.tglFbPlaceholder[data-id="'+i+'"]').replaceWith(t)}),t.html(i[1]).removeClass("closed"),f.removeClass("collapsed"),u===!0?(r.show(),wip=!1):r.slideDown(s,h,function(){wip=!1}))},l=function(t,u){if(wip!=!0){wip=!0;var e=r.find("fb\\:like");e.find("iframe").length||(o=e.clone(),e.each(function(t){n(this).replaceWith('<div class="tglFbPlaceholder" data-id="'+t+'" />')}),o.each(function(t){n(this).data("tglId",t).addClass("tglHide").appendTo("body")})),t.html(i[0]).addClass("closed"),u===!0?(r.hide(),f.addClass("collapsed"),wip=!1):r.slideUp(s,h,function(){f.addClass("collapsed"),wip=!1})}},a=function(){var t=n(this),i;t.hasClass("closed")?(v(t),i=1):(l(t),i=0),u.bakeCookie(u.cookiename,c,i)};u._validCookie()&&new RegExp(c+":0","i").test(u.mycookie)&&l(t,!0),e=t.hasClass("closed")?i[0]:i[1],t.removeClass("hide").html(e).toggle(a,a)}},faToggle:function(n,t){var i=n.find(".tgl_fa");if(i.length){var r=i.data("open"),u=i.data("close"),f=t?u:r,e=t?r:u;i.removeClass(e).addClass(f)}},_validCookie:function(){var n=this;return n.mycookie&&!(n.mycookie=="undefined")}},XenForo.register("body","XenForo.ToggleME.initGlobal"),XenForo.register(".messageUserBlock","XenForo.ToggleME.initPostbit")}(jQuery,this,document);