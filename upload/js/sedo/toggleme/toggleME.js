!function(n){XenForo.ToggleME={bloodyIE:!1,cookiename:"toggleme",initGlobal:function(){var i=XenForo.ToggleME;i.mycookie=n.getCookie(i.cookiename),i.initEffects(),n.browser.msie&&parseInt(n.browser.version,10)<8&&(i.bloodyIE=!0),n(".tglWchild").ready(function(){var t=".tglWchild",n="main";i.bakeCategories(t,n)}),n(".tglNOchild").ready(function(){var t=".tglNOchild",n="mix";i.bakeCategories(t,n)}),n(".tglNodelist_forumview").ready(function(){i.bakeNodeList()}),n(".tglSidebar").ready(function(){i.bakeBlocks()})},initEffects:function(){this.d=XenForo.toogleMeConfig.duration,this.e=XenForo.toogleMeConfig.effect},initPostbit:function(t){var i=XenForo.ToggleME,f=t.find(".tglPosbit"),e=t.find(".extraUserInfo"),r,u;(i.initEffects(),f.length!=0)&&(r=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideDown(i.d,i.e).removeClass("toggleHidden"),t.removeClass("inactive").addClass("active")},u=function(){var t=n(this);t.parents(".messageUserBlock").find(".extraUserInfo").slideUp(i.d,i.e).addClass("toggleHidden"),t.removeClass("active").addClass("inactive")},XenForo.toogleMeConfig.postbit_state===0?(e.hide(),f.addClass("inactive").toggle(r,u)):(e.show(),f.addClass("active").toggle(u,r)))},bakeCookie:function(t,i,r){var o=i+":"+r,u=this,s,e,f;return!u.mycookie||u.mycookie=="undefined"?u.mycookie=o:(s=u.mycookie.split("[]"),e=new RegExp(i+":[01]","i"),u.mycookie=u.mycookie.match(e)?u.mycookie.replace(e,o):u.mycookie+"[]"+o),f=90,f=new Date(+new Date+f*864e5),n.setCookie(t,u.mycookie,f)},bakeCategories:function(t,i){var r=this,h=n(t),y=t+".active",p=t+".inactive",c=t+".tglWOFF",s=!1,f="CategoryStripCollapsed",u="categoryStrip",o="inactive",e="active";h.hasClass("tglDnt")||(s=!0),h.addClass("active"),h.parent().each(function(){n(this).nextAll().not("span").wrapAll('<div class="toggleMEtarget" />')}),!r.mycookie||r.mycookie=="undefined"?(n(c).parent().next().hide(),n(c).removeClass(e).addClass(o),s==!0&&n(c).parent().removeClass(u).addClass(f)):h.each(function(){var a=n(this),c=this.id,c=c==undefined||!c?a.data("id"):c,l=a.parent().next(),v=new RegExp(i+c+":1","i"),y=new RegExp(i+c+":0","i");(r.mycookie.match(v)||a.hasClass("tglWOFF")&&!r.mycookie.match(y)&&!r.mycookie.match(v))&&(l.hide(),l.prev().children(t).removeClass(e).addClass(o),s==!0&&l.prev().removeClass(u).addClass(f))});var v=function(n,t){var l=n.parent(),h=l.next(),p=t?o:e,w=t?e:o,b=t?f:u,y=t?u:f;r.bloodyIE?t?h.show():h.hide():t?h.slideDown(r.d,r.e):h.slideUp(r.d,r.e),n.removeClass(p).addClass(w),s==!0&&l.removeClass(b).addClass(y);var c=n.attr("id"),c=c==undefined?n.data("id"):c,v=i+c,a=t?"0":"1";r.bakeCookie(r.cookiename,v,a)},a=function(){v(n(this),!1)},l=function(){v(n(this),!0)};n(y).toggle(a,l),n(p).toggle(l,a)},bakeNodeList:function(){var i=this,h=".tglNodelist_forumview",t=n(h),w=h+".active",p=h+".inactive",y="ndfw_",v=n(".tglNodelist_forumview").attr("id"),s=y+v,u=".toggleME_Expand",r=".toggleME_Collapse",e="active",f="inactive",o;t.each(function(){n(this).nextAll().wrapAll('<div class="toggleMEtarget" />')}),t.hasClass("tglNodeOff")?(t.addClass(f).children(u).show(),t.children(r).hide(),t.next().hide()):(t.addClass(e).children(u).hide(),t.children(r).show()),!i.mycookie||i.mycookie=="undefined"||(t.hasClass("tglNodeOff")?(o=new RegExp(s+":0","i"),i.mycookie.match(o)&&(t.removeClass(f).addClass(e).next().show(),t.children(u).hide(),t.children(r).show())):(o=new RegExp(s+":1","i"),i.mycookie.match(o)&&(t.removeClass(e).addClass(f).next().hide(),t.children(u).show(),t.children(r).hide())));var c=function(n,t){var l=t?r:u,c=t?u:r,a=t?f:e,h=t?e:f,o;n.children(l).show(),n.children(c).hide(),t?n.next().slideDown(i.d,i.e):n.next().slideUp(i.d,i.e),n.removeClass(a).addClass(h),o=t?"0":"1",i.bakeCookie(i.cookiename,s,o)},a=function(){c(n(this),!1)},l=function(){c(n(this),!0)};n(w).toggle(a,l),n(p).toggle(l,a)},bakeBlocks:function(){var t=this,o=".tglSidebar",s=n(o),w=o+".active",p=o+".inactive",v=o+".tglSbOFF",h="sbb",u=".toggleMEtarget",r="secondaryContent",e="secondaryContentCollapsed",i="active",f="inactive",c="WidgetFramework_WidgetRenderer_";s.addClass(i),s.next().each(function(){n(this).nextAll().wrapAll('<div class="toggleMEtarget" />')}),!t.mycookie||t.mycookie=="undefined"?(n(v).removeClass(i).addClass(f).siblings(u).hide(),n(v).parent().removeClass(r).addClass(e)):s.each(function(){var l=n(this),s=this.id,a,v;s!=undefined&&(s=s.replace(c,"WFWR_")),a=new RegExp(h+s+":1","i"),v=new RegExp(h+s+":0","i"),(t.mycookie.match(a)||l.hasClass("tglSbOFF")&&!t.mycookie.match(v)&&!t.mycookie.match(a))&&(l.siblings(u).hide(),l.removeClass(i).addClass(f),l.parent().removeClass(r).addClass(e))});var l=function(n,o){var a=o?f:i,v=o?i:f,y=o?e:r,p=o?r:e,s,l;o?n.siblings(u).slideDown(t.d,t.e):n.siblings(u).slideUp(t.d,t.e),n.removeClass(a).addClass(v),n.parent().removeClass(y).addClass(p),s=n.attr("id"),s!=undefined&&(s=s.replace(c,"WFWR_")),l=h+s,cookieWidgetValue=o?"0":"1",t.bakeCookie(t.cookiename,l,cookieWidgetValue)},a=function(){l(n(this),!1)},y=function(){l(n(this),!0)};n(w).toggle(a,y),n(p).toggle(y,a)}},XenForo.register("body","XenForo.ToggleME.initGlobal"),XenForo.register(".messageUserBlock","XenForo.ToggleME.initPostbit")}(jQuery,this,document);